# 2025-05-06 豆豆表情符号

## 任务描述
为每个豆豆添加emoji字段，并为每个豆豆分配一个表情符号，使豆豆百科更加生动有趣。

## 实现方案
1. 在`beans.json`文件中为每个豆豆添加emoji字段
2. 根据豆豆的特性和名称选择合适的表情符号
3. 修改`BeanButton.ts`和`BeanDetailsPanel.ts`文件，优化表情符号的显示效果

## 具体实现

### 1. 为每个豆豆添加emoji字段
为`beans.json`文件中的20个豆豆添加emoji字段，根据豆豆的特性和名称选择合适的表情符号：

| ID | 豆豆名称 | 表情符号 | 类型 |
|----|---------|---------|------|
| 1 | 暴躁豆 | 😡 | 近战 |
| 2 | 毒豆 | ☠️ | 远程 |
| 3 | 铁甲豆 | 🛡️ | 防御 |
| 4 | 闪电豆 | ⚡ | 远程 |
| 5 | 分裂豆 | 🧬 | 特殊 |
| 6 | 冰霜豆 | ❄️ | 远程 |
| 7 | 炸弹豆 | 💣 | 自爆 |
| 8 | 治疗豆 | 💊 | 辅助 |
| 9 | 暗影豆 | 👤 | 近战 |
| 10 | 岩石豆 | 🪨 | 防御 |
| 11 | 旋风豆 | 🌪️ | 近战 |
| 12 | 幻象豆 | 🔮 | 特殊 |
| 13 | 火焰豆 | 🔥 | 远程 |
| 14 | 荆棘豆 | 🌵 | 防御 |
| 15 | 音波豆 | 🔊 | 远程 |
| 16 | 吸血豆 | 🧛 | 近战 |
| 17 | 磁力豆 | 🧲 | 特殊 |
| 18 | 剧毒豆 | 🧪 | 远程 |
| 19 | 狂暴豆 | 💢 | 近战 |
| 20 | 幽灵豆 | 👻 | 特殊 |

### 2. 优化表情符号的显示效果
修改`BeanButton.ts`文件中的表情符号显示部分，增大字体大小，添加阴影效果和缩放动画：

```typescript
// 如果图像不存在，显示表情符号
const emojiText = this.scene.add.text(
  -width / 2 + 60,
  0,
  this.bean.emoji || '🟢',
  {
    fontSize: '60px', // 增大字体大小
    fontFamily: 'Arial',
    shadow: { color: '#000000', fill: true, offsetX: 2, offsetY: 2, blur: 4 } // 添加阴影效果
  }
);
emojiText.setOrigin(0.5, 0.5);
emojiText.setDepth(2);

// 添加缩放动画，使表情符号更加生动
this.scene.tweens.add({
  targets: emojiText,
  scale: { from: 0.9, to: 1.1 },
  duration: 1000,
  yoyo: true,
  repeat: -1
});
```

### 3. 优化详情面板中的表情符号显示
修改`BeanDetailsPanel.ts`文件中的表情符号显示部分，添加背景、发光效果和动画：

```typescript
// 如果图像不存在，显示表情符号
const emojiContainer = this.scene.add.container(-this.panelWidth / 4, -this.panelHeight / 4);

// 创建表情符号背景
const emojiBg = this.scene.add.circle(0, 0, 60, 0x333333, 0.7);
emojiBg.setStrokeStyle(3, 0xffffff, 0.5);
emojiContainer.add(emojiBg);

// 创建表情符号文本
const emojiText = this.scene.add.text(
  0,
  0,
  this.bean.emoji || '🟢',
  {
    fontSize: '80px', // 增大字体大小
    fontFamily: 'Arial',
    shadow: { color: '#000000', fill: true, offsetX: 2, offsetY: 2, blur: 4 } // 添加阴影效果
  }
);
emojiText.setOrigin(0.5, 0.5);
emojiContainer.add(emojiText);

// 添加发光效果
const glowFx = this.scene.add.circle(0, 0, 70, 0xffffff, 0.2);
emojiContainer.add(glowFx);

// 添加动画效果
this.scene.tweens.add({
  targets: emojiText,
  scale: { from: 0.9, to: 1.1 },
  duration: 1500,
  yoyo: true,
  repeat: -1
});

this.scene.tweens.add({
  targets: glowFx,
  alpha: { from: 0.1, to: 0.3 },
  scale: { from: 0.9, to: 1.1 },
  duration: 2000,
  yoyo: true,
  repeat: -1
});
```

### 4. 在详情面板标题旁边添加表情符号
在详情面板的标题旁边也添加表情符号，使界面更加生动：

```typescript
// 创建标题容器
const titleContainer = this.scene.add.container(0, -this.panelHeight / 2 + 40);

// 创建标题文本
const title = this.scene.add.text(
  0,
  0,
  this.bean.name,
  {
    fontSize: '28px',
    fontFamily: 'Arial',
    color: '#ffffff',
    stroke: '#000000',
    strokeThickness: 3,
    shadow: { color: '#000000', fill: true, offsetX: 2, offsetY: 2, blur: 4 }
  }
);
title.setOrigin(0.5, 0.5);
titleContainer.add(title);

// 创建标题旁边的emoji
const titleEmoji = this.scene.add.text(
  title.width / 2 + 20,
  0,
  this.bean.emoji || '🟢',
  {
    fontSize: '32px',
    fontFamily: 'Arial'
  }
);
titleEmoji.setOrigin(0, 0.5);
titleContainer.add(titleEmoji);
```

## 效果
通过添加表情符号和优化显示效果，豆豆百科变得更加生动有趣，用户可以更直观地识别不同类型的豆豆。表情符号的动画效果也增加了界面的活力，提升了用户体验。

## 后续改进
1. 可以考虑为不同类型的豆豆设计不同的背景颜色，进一步增强视觉区分度
2. 可以添加更多的动画效果，如旋转、闪烁等，使界面更加生动
3. 可以考虑根据豆豆的稀有度或强度调整表情符号的大小或效果
4. 可以添加表情符号的点击效果，如点击后播放豆豆的特效或声音
5. 可以考虑使用SVG图标代替emoji，以获得更一致的跨平台显示效果
