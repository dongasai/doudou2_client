# 技能系统设计文档

## 1. 概述

技能系统是战斗系统的核心组成部分，用于实现英雄和豆豆的各种特殊能力。系统需要支持多种类型的技能效果，并能够灵活地组合这些效果。

## 2. 技能类型

### 2.1 基础类型
- 伤害型：直接造成伤害
- 治疗型：恢复生命值
- 控制型：限制目标行动
- 增益型：提升属性
- 减益型：降低属性
- 召唤型：召唤其他单位
- 位移型：改变位置
- 特殊型：特殊效果

### 2.2 目标类型
- 单体目标
- 范围目标
- 自身
- 友方单位
- 全体敌人

## 3. 技能效果

### 3.1 基础效果
- 伤害：直接伤害
- 治疗：生命恢复
- 护盾：临时生命值
- 眩晕：无法行动
- 减速：降低移动速度
- 增益：提升属性
- 减益：降低属性

### 3.2 特殊效果
- 连击：多段伤害
- 穿透：忽视防御
- 持续：持续时间效果
- 反弹：伤害反弹
- 吸血：伤害转化治疗
- 分裂：单位分裂
- 召唤：生成新单位

## 4. 英雄技能特点

### 4.1 法师类
- 烈焰(1号)：范围伤害为主，技能组合：
  - 火球术：单体伤害
  - 烈焰风暴：范围持续伤害
  - 灼烧：持续减益
  - 炎爆：大范围伤害

### 4.2 战士类
- 铁壁(2号)：防御控制为主，技能组合：
  - 盾击：单体控制
  - 铁甲：自身增益
  - 守护：团队增益
  - 震地：范围控制

### 4.3 射手类
- 疾风(3号)：远程输出为主，技能组合：
  - 快射：连续伤害
  - 精准射击：高额单体伤害
  - 穿云：穿透伤害
  - 箭雨：范围伤害

## 5. 豆豆技能特点

### 5.1 攻击型豆豆
- 暴躁豆：近战冲锋
- 毒豆：持续伤害
- 闪电豆：连锁伤害
- 暗影豆：突袭伤害

### 5.2 防御型豆豆
- 铁甲豆：高防御
- 岩石豆：远程投掷

### 5.3 特殊型豆豆
- 分裂豆：死亡分裂
- 炸弹豆：自爆伤害
- 治疗豆：团队治疗
- 冰霜豆：控制减速

## 6. 技能实现机制

### 6.1 基础属性
- cooldown：冷却时间
- cost：能量消耗
- duration：持续时间
- range：作用范围

### 6.2 效果计算
- 基础伤害：技能基础值 * (攻击力 / 100)
- 实际伤害：基础伤害 * (1 - 防御减免)
- 暴击伤害：基础伤害 * 1.5
- 持续伤害：基础伤害 / 持续时间
- 治疗量：基础治疗 * (1 + 治疗加成)

### 6.3 状态效果
- 控制：限制行动，持续特定回合
- 减速：降低速度，百分比计算
- 护盾：临时生命值，可叠加
- 增益：属性提升，可持续多回合

## 7. 技能系统接口

### 7.1 核心接口
```typescript
interface SkillEffect {
  type: EffectType;
  value: number;
  duration?: number;
  range?: number;
  target: TargetType;
}

interface SkillExecution {
  source: BattleUnit;
  targets: BattleUnit[];
  skill: Skill;
  effects: SkillEffect[];
}
```

### 7.2 主要方法
- castSkill：释放技能
- calculateEffect：计算效果
- applyEffect：应用效果
- updateStatus：更新状态
- checkCondition：检查条件

## 8. 后续扩展

### 8.1 计划功能
- 技能升级系统
- 技能组合效果
- 被动技能系统
- 技能特效系统
- 技能触发条件

### 8.2 优化方向
- 技能效果的可配置性
- 技能判定的准确性
- 技能表现的流畅性
- 技能平衡的调整性 